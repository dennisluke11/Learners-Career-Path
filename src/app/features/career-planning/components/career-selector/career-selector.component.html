<div class="career-selector-container">
  <h2>Select Your Desired Career</h2>
  
  <div *ngIf="loading" class="loading-message">
    <p>Loading careers from database...</p>
  </div>
  
  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
  </div>
  
  <div *ngIf="!loading && !error" class="careers-info">
    <p class="careers-count">{{ careers.length }} career{{ careers.length !== 1 ? 's' : '' }} available</p>
  </div>
  
  <div class="select-wrapper" [class.disabled]="loading || careers.length === 0">
    <select 
      (change)="onSelectCareer($event)" 
      class="career-select"
      [disabled]="loading || careers.length === 0">
      <option value="" disabled selected>
        {{ loading ? 'Loading...' : careers.length === 0 ? 'No careers available' : 'Select Desired Career' }}
      </option>
      <option *ngFor="let career of careers" [value]="career.name">
        {{ career.name }}<span *ngIf="career.category"> ({{ career.category }})</span>
      </option>
    </select>
  </div>
  
  <div *ngIf="selectedCareer" class="selected-career-info">
    <h3>Selected: {{selectedCareer.name}}</h3>
    <div *ngIf="selectedCountry" class="country-badge">
      <span>{{selectedCountry.flag}}</span>
      <span>Requirements for {{selectedCountry.name}}</span>
    </div>
    <div class="requirements">
      <h4>Minimum Requirements:</h4>
      <div *ngIf="!selectedCareer.minGrades || getObjectKeys(selectedCareer.minGrades).length === 0" class="no-requirements">
        <p>No specific requirements available for this career.</p>
        <p class="info-text">Please check with the institution for admission requirements.</p>
      </div>
      <ul *ngIf="displayRequirements && getObjectKeys(displayRequirements).length > 0">
        <li *ngFor="let subject of getObjectKeys(displayRequirements)">
          <span class="subject-name">{{subject}}:</span>
          <span class="grade-required">{{displayRequirements[subject]}}%</span>
          <span *ngIf="subject.includes(' OR ')" class="either-or-note">(Either one required)</span>
        </li>
      </ul>
      
      <!-- Show note for either/or subjects -->
      <div *ngIf="selectedCountry?.code === 'ZA' && (selectedCareer.minGrades?.['Math'] !== undefined || selectedCareer.minGrades?.['MathLiteracy'] !== undefined || selectedCareer.minGrades?.['English'] !== undefined || selectedCareer.minGrades?.['EnglishFAL'] !== undefined)" class="either-or-info">
        <p class="info-note">
          <strong>Note:</strong> For South Africa, you only need to meet the requirement for <strong>one</strong> of the subjects in each "OR" pair (e.g., Mathematics OR Mathematical Literacy).
        </p>
      </div>
      
      <!-- Show qualification levels if available -->
      <div *ngIf="displayQualificationLevels && displayQualificationLevels.length > 0" class="qualification-levels">
        <h5>Qualification Levels:</h5>
        <div *ngFor="let level of displayQualificationLevels" class="qual-level">
          <h6>{{level.level}} (NQF {{level.nqfLevel}})</h6>
          <ul *ngIf="level.minGrades && getObjectKeys(level.minGrades).length > 0">
            <li *ngFor="let subject of getObjectKeys(level.minGrades)">
              <span class="subject-name">{{subject}}:</span>
              <span class="grade-required">{{level.minGrades[subject]}}%</span>
              <span *ngIf="subject.includes(' OR ')" class="either-or-note">(Either one required)</span>
            </li>
          </ul>
          <div *ngIf="level.aps" class="aps-requirement">
            <span class="aps-label">Admission Point Score (APS):</span>
            <span class="aps-value">{{level.aps}}</span>
          </div>
          <p *ngIf="level.notes" class="level-notes">{{level.notes}}</p>
        </div>
      </div>
    </div>
  </div>
</div>

